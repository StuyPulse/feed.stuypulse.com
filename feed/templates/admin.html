{% extends "layout.html" %}
{% block body %}
<div class="row">
    <div class="fifteen columns">
        <h1>Hello {{ user }}!</h1>
    </div>
    <div class="one columns">
        <a href="{{ logout_url }}" class="button">Logout</a>
    </div>
</div>
<div class="sixteen columns">
    <div id="hangout_url_container"><p>
    {% if hangout_exists %}
        There is currently a hangout on air!<br>
        Click <a href="{{ hangout_link }}">here</a> to join the hangout!<br>
        <div id="youtube" style="text-align:center;"></div>
    {% else %}
        There is currently no hangout on air! boohoo :(<br>
        Would you like to create a hangout?
    {% endif %}
    </p></div>
    <div id="placeholder-div"></div>
</div>
{% endblock %}
{% block scripts %}
{% if hangout_exists %}
<script type="text/javascript">
$(document).ready(function() {
    $('#youtube').html('<iframe style="margin:auto; width:853; height:480;" src="//www.youtube.com/embed/{{ youtube_link }}" frameborder="0" allowfullscreen></iframe>');
    youtubeResize();
});
$(window).resize(youtubeResize);
function youtubeResize() {
    var w = $('#youtube').parent().parent().width() * .9;
    $('#youtube iframe').width(w);
    $('#youtube iframe').height(w / 1.777);
}
</script>
{% else %}
<script type="text/javascript">
window.___gcfg = {
  lang: 'en-US'
};
(function() {
  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
  po.src = 'https://apis.google.com/js/platform.js?onload=renderButtons';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
function renderButtons(){
  gapi.hangout.render('placeholder-div', {
    'render': 'createhangout',
    'hangout_type': 'onair',
    'initial_apps': [{'app_id': '857084679279', 'app_type': 'LOCAL_APP'}],
    'widget_size': 175
  });
}
</script>
{% endif %}
{% endblock %}
